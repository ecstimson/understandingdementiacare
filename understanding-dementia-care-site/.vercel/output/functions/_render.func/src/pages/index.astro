---
import BaseLayout from '../layouts/BaseLayout.astro';
import Section from '../components/Section.astro';
import Button from '../components/Button.astro';
import Card from '../components/Card.astro';
import { client } from '../lib/sanity';
import type { Testimonial } from '../lib/types';

// Fetch featured testimonials from Sanity
const testimonials = await client.fetch<Testimonial[]>(`
  *[_type == "testimonial" && featured == true][0...2] {
    _id,
    name,
    role,
    quote
  }
`);
---

<BaseLayout>
  <div class="fade-in">
    <!-- Hero Section -->
    <div class="relative pt-12 pb-32 md:pt-24 md:pb-40">
      <div class="container mx-auto px-6 max-w-6xl">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
          <div class="order-2 md:order-1">
            <span class="block text-stone-500 tracking-[0.2em] text-xs uppercase mb-6">
              Dementia Consultant & Educator
            </span>
            <h1 class="font-serif text-5xl md:text-6xl lg:text-7xl text-stone-900 leading-[1.1] mb-8">
              Clarity in complexity. <br/>
              <span class="italic text-stone-500">Grace in care.</span>
            </h1>
            <p class="font-light text-stone-600 text-lg leading-relaxed mb-10 max-w-md">
              Helping families and professionals navigate the journey of dementia with expert guidance and deep humanity.
            </p>
            <div class="flex flex-col sm:flex-row gap-6">
              <Button href="/consulting">Family Support</Button>
              <Button href="/speaking" variant="outline">For Organizations</Button>
            </div>
          </div>
          <div class="order-1 md:order-2">
            <div class="relative overflow-hidden aspect-[4/5] bg-stone-200">
              <img 
                src="https://picsum.photos/800/1000?grayscale" 
                alt="Mary Donnelly" 
                class="w-full h-full object-cover filter grayscale hover:grayscale-0 transition-all duration-1000 ease-in-out"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Introduction -->
    <Section dark>
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="font-serif text-3xl md:text-4xl text-stone-800 mb-8">
          "Dementia care is not just about managing symptoms. It is about honoring the person behind the diagnosis."
        </h2>
        <p class="font-light text-stone-600 text-lg leading-relaxed mb-12">
          For over two decades, I have worked at the intersection of clinical expertise and compassionate care. My work is dedicated to bridging the gap between medical reality and the human experience, ensuring that every individual is treated with the dignity they deserve.
        </p>
        <Button href="/about" variant="text">
          Read my story 
          <svg class="ml-2 w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </Button>
      </div>
    </Section>

    <!-- Services Preview -->
    <Section>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
        <Card>
          <div>
            <h3 class="font-serif text-2xl text-stone-800 mb-4">Family Consulting</h3>
            <p class="font-light text-stone-600 mb-8 leading-relaxed">
              Personalized guidance for families navigating a new diagnosis or challenging behavioral changes.
            </p>
          </div>
          <div>
            <Button href="/consulting" variant="text">
              Learn more 
              <svg class="ml-2 w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </Button>
          </div>
        </Card>

        <Card>
          <div>
            <h3 class="font-serif text-2xl text-stone-800 mb-4">Speaking & Education</h3>
            <p class="font-light text-stone-600 mb-8 leading-relaxed">
              Keynotes and workshops for healthcare organizations, conferences, and community groups.
            </p>
          </div>
          <div>
            <Button href="/speaking" variant="text">
              Learn more 
              <svg class="ml-2 w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </Button>
          </div>
        </Card>

        <Card>
          <div>
            <h3 class="font-serif text-2xl text-stone-800 mb-4">Resources & Writing</h3>
            <p class="font-light text-stone-600 mb-8 leading-relaxed">
              Books, articles, and guides designed to empower caregivers with practical knowledge.
            </p>
          </div>
          <div>
            <Button href="/book" variant="text">
              Learn more 
              <svg class="ml-2 w-4 h-4 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
              </svg>
            </Button>
          </div>
        </Card>
      </div>
    </Section>

    <!-- Testimonial Snippet -->
    <Section className="border-t border-stone-200">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
        <div class="aspect-square bg-stone-100 overflow-hidden relative">
          <img 
            src="https://picsum.photos/800/800?grayscale" 
            alt="Hands holding" 
            class="w-full h-full object-cover filter grayscale hover:grayscale-0 transition-all duration-1000 opacity-90"
          />
        </div>
        <div>
          {testimonials.length > 0 ? (
            <>
              <blockquote class="font-serif text-3xl text-stone-800 leading-snug mb-8">
                "{testimonials[0].quote}"
              </blockquote>
              <cite class="block text-sm uppercase tracking-widest text-stone-500 not-italic">
                — {testimonials[0].name}
              </cite>
            </>
          ) : (
            <>
              <blockquote class="font-serif text-3xl text-stone-800 leading-snug mb-8">
                "Mary transformed our fear into understanding. She gave us the tools to connect with our father again."
              </blockquote>
              <cite class="block text-sm uppercase tracking-widest text-stone-500 not-italic">
                — The Richardson Family
              </cite>
            </>
          )}
          <div class="mt-12">
            <Button href="/testimonials" variant="outline">Read more stories</Button>
          </div>
        </div>
      </div>
    </Section>
  </div>
</BaseLayout>
